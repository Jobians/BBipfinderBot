<!DOCTYPE html>
<html>
  <head>
    <style>
    p, h1 {
        color: green;
    }
    </style>
    <script src=
"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>
      <script>
    $.getJSON("https://api64.ipify.org?format=json", function(data) {
        $("#gfg").html(data.ip);
    })
    </script>
    <script>
// get URL queries params as array:
function getQueryStringParam(param) {
  var url = window.location.toString();
  url.match(/\?(.+)$/);
  var params = RegExp.$1;
  params = params.split("&");
  var queryStringList = {};
  for(var i = 0; i < params.length; i++) {
    var tmp = params[i].split("=");
    queryStringList[tmp[0]] = unescape(tmp[1]);
  }
  return queryStringList[param];
}

//if submit button is clicked
function sendData(message) {	
  // we have webhook url in params
  var url = getQueryStringParam("link")
  $("#webhookUrl").text(url);
  
  // send data to bot
  $.ajax({
    type: "POST",
    url: url,
    data: {
      content: message
    },
    success: success,
    dataType: "json"
  });
}

// send Text from text area
function sendText() {
	var message = $("#message").val();
  sendData(message);
}

function success() {
  alert("Message sended");
}

// visit webpage event
$().ready(function () {
  sendData("User just opened a web page");
})
    </script>
</head>
<body>
    <center>
<h1>Demo page for webhook sending</h1>
<p>You can use source code of this page</p>

<textarea id="1message" rows="5">Hello from web page!</textarea>

<p>
  <input value="Send" onclick="sendText()" type="button">
</p>
<p>
<b>Webhook url:</b>
  <span id="webhookUrl">no webhook</span>
  <p>web page get this url from query</p
</p>
        <h1>Ip Finder</h1>
        <h3>Public IP Address of user is:</h3>
        <p id="gfg"></p>
 </center>
</body>
</html>
